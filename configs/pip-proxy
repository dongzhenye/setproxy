#!/bin/bash
# Python pip ä»£ç†é…ç½®
# ä½¿ç”¨æ–¹æ³•: 
# 1. å¼€å¯ä»£ç†: bash configs/pip-proxy on
# 2. å…³é—­ä»£ç†: bash configs/pip-proxy off

# pip é…ç½®æ–‡ä»¶è·¯å¾„
PIP_CONFIG_DIR="$HOME/.pip"
PIP_CONFIG_FILE="$PIP_CONFIG_DIR/pip.conf"

# æ£€æŸ¥å‚æ•°
if [ "$1" == "on" ]; then
    echo "ðŸ é…ç½®pipä»£ç†..."
    
    # åˆ›å»ºé…ç½®ç›®å½•
    mkdir -p "$PIP_CONFIG_DIR"
    
    # å†™å…¥é…ç½®æ–‡ä»¶
    cat > "$PIP_CONFIG_FILE" << EOF
[global]
proxy = http://127.0.0.1:7890
trusted-host = pypi.org
               files.pythonhosted.org
               pypi.python.org
EOF
    
    echo "âœ… pipä»£ç†å·²å¼€å¯"
    echo "é…ç½®æ–‡ä»¶ä½ç½®: $PIP_CONFIG_FILE"
    echo "ä»£ç†åœ°å€: http://127.0.0.1:7890"
    
elif [ "$1" == "off" ]; then
    echo "ðŸ ç§»é™¤pipä»£ç†..."
    
    if [ -f "$PIP_CONFIG_FILE" ]; then
        rm "$PIP_CONFIG_FILE"
        echo "ðŸ”´ pipä»£ç†å·²å…³é—­"
    else
        echo "pipé…ç½®æ–‡ä»¶ä¸å­˜åœ¨"
    fi
    
else
    echo "ä½¿ç”¨æ–¹æ³•:"
    echo "  å¼€å¯ä»£ç†: bash configs/pip-proxy on"
    echo "  å…³é—­ä»£ç†: bash configs/pip-proxy off"
    echo ""
    echo "å½“å‰é…ç½®:"
    if [ -f "$PIP_CONFIG_FILE" ]; then
        echo "  é…ç½®æ–‡ä»¶å­˜åœ¨: $PIP_CONFIG_FILE"
        echo "  å†…å®¹:"
        cat "$PIP_CONFIG_FILE" | sed 's/^/    /'
    else
        echo "  é…ç½®æ–‡ä»¶ä¸å­˜åœ¨"
    fi
fi

# ä¸´æ—¶ä½¿ç”¨ä»£ç†å®‰è£…åŒ…çš„å‘½ä»¤ç¤ºä¾‹
echo ""
echo "ðŸ’¡ ä¸´æ—¶ä½¿ç”¨ä»£ç†å®‰è£…åŒ…:"
echo "  pip install --proxy http://127.0.0.1:7890 package_name" 