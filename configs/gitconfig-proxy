#!/bin/bash
# Git ä»£ç†é…ç½®
# ä½¿ç”¨æ–¹æ³•: 
# 1. å¼€å¯ä»£ç†: bash configs/gitconfig-proxy on
# 2. å…³é—­ä»£ç†: bash configs/gitconfig-proxy off

# åŠ è½½é€šç”¨å‡½æ•°
source "$(dirname "${BASH_SOURCE[0]}")/common.sh"
PROXY_URL="$(get_proxy_url)"

# æ£€æŸ¥å‚æ•°
if [ "$1" == "on" ]; then
    echo "ğŸ”§ é…ç½®Gitä»£ç†..."
    git config --global http.proxy "$PROXY_URL"
    git config --global https.proxy "$PROXY_URL"
    echo "âœ… Gitä»£ç†å·²å¼€å¯"
    echo "HTTPä»£ç†: $(git config --global --get http.proxy)"
    echo "HTTPSä»£ç†: $(git config --global --get https.proxy)"
elif [ "$1" == "off" ]; then
    echo "ğŸ”§ ç§»é™¤Gitä»£ç†..."
    git config --global --unset http.proxy
    git config --global --unset https.proxy
    echo "ğŸ”´ Gitä»£ç†å·²å…³é—­"
else
    echo "ä½¿ç”¨æ–¹æ³•:"
    echo "  å¼€å¯ä»£ç†: bash configs/gitconfig-proxy on"
    echo "  å…³é—­ä»£ç†: bash configs/gitconfig-proxy off"
    echo ""
    echo "å½“å‰é…ç½®:"
    echo "  HTTPä»£ç†: $(git config --global --get http.proxy || echo 'æœªè®¾ç½®')"
    echo "  HTTPSä»£ç†: $(git config --global --get https.proxy || echo 'æœªè®¾ç½®')"
fi 